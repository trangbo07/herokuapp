<!doctype html>
<html lang="en" class="theme-fs-sm" data-bs-theme="light" data-bs-theme-color="default" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Assigned Services - Doctor Dashboard</title>
    <link rel="shortcut icon" href="../assets/assets/images/favicon.ico" />
    <link rel="stylesheet" href="../assets/assets/css/core/libs.min.css" />
    <link rel="stylesheet" href="../assets/assets/vendor/flaticon/css/flaticon.css" />
    <link rel="stylesheet" href="../assets/assets/vendor/font-awesome/css/all.min.css" />
    <link rel="stylesheet" href="../assets/assets/css/kivicare.min.css?v=1.4.1" />
    <link rel="stylesheet" href="../assets/assets/css/custom.min.css?v=1.4.1" />
    <link rel="stylesheet" href="../assets/assets/css/rtl.min.css?v=1.4.1"/>
    <link rel="stylesheet" href="../assets/assets/css/customizer.min.css?v=1.4.1"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,300;1,400;1,500&display=swap" rel="stylesheet">
</head>
<body class="  ">
<!-- loader Start -->
<div id="loading">
    <div class="loader simple-loader">
        <div class="loader-body">
            <img src="../assets/assets/images/loader.gif" alt="loader" class="light-loader img-fluid " width="200">
        </div>
    </div>
</div>
<!-- loader END -->
<aside class="sidebar sidebar-base " id="first-tour" data-toggle="main-sidebar" data-sidebar="responsive">
    <div class="sidebar-header d-flex align-items-center justify-content-start position-relative">
        <a href="home-doctor.html" class="navbar-brand">
            <div class="logo-main">
                <img class="logo-normal img-fluid" src="../assets/assets/images/logo.png" height="30" alt="logo">
            </div>
        </a>
        <div class="sidebar-toggle" data-toggle="sidebar" data-active="true">
            <i class="icon">
                <svg class="icon-20 icon-arrow" width="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.5 19L8.5 12L15.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
            </i>
        </div>
    </div>
    <div class="sidebar-body pt-0 data-scrollbar">
        <div class="sidebar-list">
            <!-- Sidebar Menu Start -->
            <ul class="navbar-nav iq-main-menu" id="sidebar-menu">
                <li class="nav-item">
                    <a class="nav-link" href="home-doctor.html">
                        <i class="icon fas fa-home"></i><span class="item-name">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="appointment-doctor.html">
                        <i class="icon fas fa-calendar-alt"></i><span class="item-name">Appointment</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="examination.html">
                        <i class="icon fas fa-file-medical"></i><span class="item-name">Examination</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="assigned-services.html">
                        <i class="icon fas fa-tasks"></i><span class="item-name">Assigned Services</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="diagnosis.html">
                        <i class="icon fas fa-notes-medical"></i><span class="item-name">Diagnosis</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="logout()">
                        <i class="icon fas fa-sign-out-alt"></i><span class="item-name">Logout</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="sidebar-footer"></div>
</aside>
<main class="main-content">
    <div class="position-relative">
        <nav class="nav navbar navbar-expand-lg navbar-light iq-navbar">
            <div class="container-fluid navbar-inner">
                <a href="home-doctor.html" class="navbar-brand"></a>
                <div class="sidebar-toggle" data-toggle="sidebar" data-active="true">
                    <i class="icon">
                        <svg class="icon-20" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4.25 12.2744L19.25 12.2744" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M10.2998 18.2988L4.2498 12.2748L10.2998 6.24976" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </i>
                </div>
                <div class="input-group search-input">
                            <span class="input-group-text" id="search-input">
                                <svg class="icon-20" width="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="11.7669" cy="11.7666" r="8.98856" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></circle>
                                    <path d="M18.0186 18.4851L21.5426 22.0001" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                            </span>
                    <input type="search" class="form-control" placeholder="Search...">
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto top-menu navbar-nav-scroll">
                        <!-- User Profile -->
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <div class="content-inner container-fluid pb-0" id="page_layout">
        <div class="row mb-4">
            <div class="col-12">
                <h2 class="mb-0">
                    <i class="fas fa-tasks me-2"></i>
                    My Assigned Services
                </h2>
                <p class="text-muted">View and manage paraclinical services assigned to you.</p>
            </div>
        </div>

        <!-- Filter and Search Controls -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="row g-3 align-items-center">
                    <div class="col-md-6 col-lg-4">
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-search"></i></span>
                            <input type="text" id="searchInput" class="form-control" placeholder="Search by patient or service name...">
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-8">
                        <div class="d-flex justify-content-md-end">
                            <div class="btn-group" role="group" aria-label="Status Filter">
                                <button type="button" class="btn btn-primary active" data-status-filter="all">
                                    <i class="fas fa-list me-1"></i> All
                                </button>
                                <button type="button" class="btn btn-outline-primary" data-status-filter="pending">
                                    <i class="fas fa-clock me-1"></i> Pending
                                </button>
                                <button type="button" class="btn btn-outline-primary" data-status-filter="completed">
                                    <i class="fas fa-check-circle me-1"></i> Completed
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Alert Message -->
        <div id="alertContainer"></div>

        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="d-flex justify-content-center align-items-center d-none" style="height: 200px;">
            <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <!-- Error Message -->
        <div id="errorMessage" class="alert alert-danger d-none">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <span id="errorText">An error occurred</span>
        </div>

        <!-- Services List -->
        <div id="servicesList" class="row">
            <!-- Service cards will be loaded here -->
        </div>

        <!-- No Services Message -->
        <div id="noServicesMessage" class="text-center p-5 d-none">
            <img src="../assets/assets/images/error/404-error.png" alt="No data" class="img-fluid mb-4" style="max-width: 250px;">
            <h4 class="mb-2">No Assigned Services Found</h4>
            <p class="text-muted">It seems there are no services assigned to you matching the current filters.</p>
        </div>

    </div>
</main>
<!-- Result Modal -->
<div class="modal fade" id="resultModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-flask me-2"></i>
                    Enter Test Results
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="resultForm">
                    <input type="hidden" id="serviceOrderItemId" name="serviceOrderItemId">

                    <div class="mb-3">
                        <label class="form-label">Service Name</label>
                        <input type="text" class="form-control" id="modalServiceName" readonly>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Patient Name</label>
                        <input type="text" class="form-control" id="modalPatientName" readonly>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Test Results *</label>
                        <textarea class="form-control" id="testResults" name="testResults" rows="4"
                                  placeholder="Enter detailed test results..." required></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Conclusion</label>
                        <textarea class="form-control" id="conclusion" name="conclusion" rows="3"
                                  placeholder="Enter conclusion or recommendations..."></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select class="form-select" id="resultStatus" name="resultStatus" required>
                            <option value="">Select status...</option>
                            <option value="Normal">Normal</option>
                            <option value="Abnormal">Abnormal</option>
                            <option value="Critical">Critical</option>
                            <option value="Pending">Pending Further Tests</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="saveTestResult()">
                    <i class="fas fa-save me-2"></i>Save Results
                </button>
            </div>
        </div>
    </div>
</div>
<script src="../assets/assets/js/core/libs.min.js"></script>
<script src="../assets/assets/js/core/external.min.js"></script>
<script src="../assets/assets/js/kivicare.js?v=1.4.1"></script>
<script src="../assets/jslogic/assigned-services.js"></script>
</body>
</html> 